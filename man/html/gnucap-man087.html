<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ANSI_X3.4-1968">
<META name="GENERATOR" content="hevea 1.07">
<TITLE>
Functions
</TITLE>
</HEAD>
<BODY >

<H2><A NAME="htoc86">4.2</A>&nbsp;&nbsp;Functions</H2>
Gnucap behavioral modeling functions are an extension of the Spice source
time dependent values.

<H3>4.2.1&nbsp;&nbsp;The extensions</H3>
They apply to all elements (primitive components).<BR>
<BR>
All accept either Spice compatible order dependent parameters, or
easier keyword=value notation.<BR>
<BR>
The syntax is identical for all supported components.

<H3>4.2.2&nbsp;&nbsp;Fixed sources</H3>
Time dependent functions are voltage or current as a function of time.
They are mostly Spice compatible, with extensions.<BR>
<BR>
Nonlinear transfer functions use time as the independent variable.
Some may not make sense, but they are there anyway.

<H3>4.2.3&nbsp;&nbsp;Capacitors and inductors</H3>
Time dependent functions are capacitance or inductance as a function
of time. They are voltage/current conserving, not charge/flux
conserving.<BR>
<BR>
Nonlinear transfer functions are charge or flux as a function of input
(voltage or current). Charge and flux are conserved, and can be
probed.

<H3>4.2.4&nbsp;&nbsp;Resistors and conductances</H3>
Time dependent functions are resistance or conductance as a function
of time.<BR>
<BR>
Nonlinear transfer functions are current or voltage as a function of
input (voltage or current). Resistors define voltage as a function of
current. Conductances define current as a function of voltage.

<H3>4.2.5&nbsp;&nbsp;Controlled sources</H3>
Time dependent functions are gain (v/v, transconductance, etc)
function of time.<BR>
<BR>
Nonlinear transfer functions are output (voltage or current) as a
function of input (voltage or current).

<H3>4.2.6&nbsp;&nbsp;Available functions</H3>
<DL COMPACT=compact><DT><B><TT>COMPLEX</TT></B><DD> Complex (re, im) value.
<DT><B><TT>EXP</TT></B><DD> Spice Exp source. (time dependent value).
<DT><B><TT>FIT</TT></B><DD> Fit a curve with splines.
<DT><B><TT>GENERATOR</TT></B><DD> Value from Generator command.
<DT><B><TT>POLY</TT></B><DD> Polynomial (Spice style).
<DT><B><TT>POSY</TT></B><DD> Posynomial (Like poly, non-integer powers).
<DT><B><TT>PULSE</TT></B><DD> Spice Pulse source. (time dependent value).
<DT><B><TT>PWL</TT></B><DD> Piece-wise linear.
<DT><B><TT>SFFM</TT></B><DD> Spice Frequency Modulation (time dependent value).
<DT><B><TT>SIN</TT></B><DD> Spice Sin source. (time dependent value).
<DT><B><TT>TANH</TT></B><DD> Hyperbolic tangent transfer function.</DL>
In addition, you may name a ``function'' defined by a <TT>.model</TT>
statement. The following <TT>.model</TT> types may be used here:
<DL COMPACT=compact><DT><B><TT>TABLE</TT></B><DD> Fit a curve with splines.
<DT><B><TT>Cap</TT></B><DD> Spice semiconductor ``capacitor'' model.
<DT><B><TT>Res</TT></B><DD> Spice semiconductor ``resistor'' model.</DL>


<H3>4.2.7&nbsp;&nbsp;Parameters that apply to all functions</H3>
These parameters are available with all functions. Some may not make
sense in some cases, but they are available anyway.
<DL COMPACT=compact><DT><B><TT>Bandwidth</TT> = <I>x</I></B><DD> AC analysis bandwidth.
(Default = infinity.) The transfer function is frequency dependent,
with a 3 DB point at this frequency. There is frequency dependent
phase shift ranging from 0 degrees at low frequencies to 90 degrees at
high frequencies. The phase shift is 45 degrees at the specified
frequency. AC ANALYSIS ONLY.<BR>
<BR>
<DT><B><TT>Delay</TT> = <I>x</I></B><DD> AC analysis delay. (Default = 0.) 
The signal is delayed by x seconds, effectively by a frequency
dependent phase shift. AC ANALYSIS ONLY.<BR>
<BR>
<DT><B><TT>Phase</TT> = <I>x</I></B><DD> AC analysis phase. (Default = 0.)
A fixed phase shift is applied. This is primarily intended for
sources, but applies to all elements. AC ANALYSIS ONLY.<BR>
<BR>
<DT><B><TT>IOffset</TT> = <I>x</I></B><DD> Input offset. (Default = 0.)
A DC offset is added to the ``input'' of the element, before
evaluating the function.<BR>
<BR>
<DT><B><TT>OOffset</TT> = <I>x</I></B><DD> Output offset. (Default = 0.)
A DC offset is added to the ``output'' of the element, after
evaluating the function.<BR>
<BR>
<DT><B><TT>Scale</TT> = <I>x</I></B><DD> Transfer function scale factor. 
(Default = 1.) The transfer function is multiplied by a constant.<BR>
<BR>
<DT><B><TT>TNOM</TT> = <I>x</I></B><DD> Nominal temperature. (Default = .option TNOM)
The nominal values apply at this temperature.<BR>
<BR>
<DT><B><TT>TC1</TT> = <I>x</I></B><DD> First order temperature coefficient.
(Default = 0.) <BR>
<BR>
<DT><B><TT>TC2</TT> = <I>x</I></B><DD> Second order temperature coefficient.
(Default = 0.) <BR>
<BR>
<DT><B><TT>IC</TT> = <I>x</I></B><DD> Initial condition. An initial value, to
force at time=0. The actual parameter applied depends on the
component. (Capacitor voltage, inductor current. All others ignore
it.) You must use the ``UIC'' option for it to be used.</DL>
Temperature adjustments and scaling use the following formula:
<PRE>
value *= _scale * (1 + _tc1*tempdiff 
              + _tc2*tempdiff*tempdiff)
</PRE>where <TT>tempdiff</TT> is <TT>t - _tnom</TT>.<BR>
<BR>

</BODY>
</HTML>
