<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ANSI_X3.4-1968">
<META name="GENERATOR" content="hevea 1.07">
<TITLE>
FIT: Fit a curve
</TITLE>
</HEAD>
<BODY >

<H2><A NAME="htoc89">4.5</A>&nbsp;&nbsp;<TT>FIT</TT>: Fit a curve</H2>

<H3>4.5.1&nbsp;&nbsp;Syntax</H3>

<TT>FIT</TT> <I>x1,y1 x2,y2 ...</I> <I>args</I>


<H3>4.5.2&nbsp;&nbsp;Purpose</H3>
Fits a set of data using piecewise polynomials, or splines.

<H3>4.5.3&nbsp;&nbsp;Comments</H3>
This function fits a set of piecewise polynomials to a set of data.<BR>
<BR>
For capacitors, this function defines <EM>charge</EM> as a function of
voltage. For inductors, it defines <EM>flux</EM> as a function of
current.<BR>
<BR>
For fixed sources, it defines voltage or current as a function of
time.<BR>
<BR>
The values of <I>x</I> must be in increasing order.<BR>
<BR>
If <EM>order</EM> is 1, it is the same as <TT>PWL</TT>. If <EM>order</EM> is
3, it will use cubic splines. The result and its first two
derivatives are continuous.<BR>
<BR>
Outside the specified range, it uses linear extrapolation. The
behavior depends on the parameters <EM>below</EM> and <EM>above</EM>. The
value of <EM>below</EM> or <EM>above</EM> is the derivative to use, which
is a resistance for resistors, voltage gain for a VCVS, and so on. If 
it is not specified, the value is automatically determined.<BR>
<BR>
The properties are determined by the value of <EM>order</EM>.<BR>
<BR>

<H4>Order = 3 (cubic splines)</H4>
The default is to use ``natural'' splines, which sets the second
derivative to zero at the boundary. If a value of <EM>below</EM> or
<EM>above</EM> is specified, ``clamped'' splines will be used. In any
case, there will be a smooth transition at the boundaries. When using
``clamped'' splines, the second derivative may have a discontinuity at
the boundaries<BR>
<BR>

<H4>Order = 2 (quadratic splines)</H4>
By default, the derivative at the upper end is determined by the slope
of the last segment. This is also the derivative above the range.
Below the range, the derivative determined at the lower bound is used.
It is recommended that only one of <EM>below</EM> and <EM>above</EM> be
specified. If both are specified, the splines are determined using
<EM>above</EM>, and there will be a discontinuity in the derivative at
the lower bound.<BR>
<BR>

<H4>Order = 1 (piecewise linear interploation)</H4>
For first order (linear) interpolation, the default slope outside the
range is the extension of the slope in the end segments. The
parameters <EM>below</EM> and <EM>above</EM> have no effect inside the
range.<BR>
<BR>

<H4>Order = 0 (piecewise constant interploation)</H4>
The resulting value is constant over the interval, and has
discontinuities at the specified points. The parameters <EM>below</EM>
and <EM>above</EM> are ignored. The slope is always 0.

<H3>4.5.4&nbsp;&nbsp;Parameters</H3>
<DL COMPACT=compact><DT><B><TT>Order</TT> = <I>x</I></B><DD> The order of the polynomial to fit,
 within the supplied data. (Default = 3) Legal values are 0, 1, 2,
 and 3, only.<BR>
<BR>
<DT><B><TT>Below</TT> = <I>x</I></B><DD> The value of the derivative to use
below or before the specified range. <BR>
<BR>
<DT><B><TT>Above</TT> = <I>x</I></B><DD> The value of the derivative to use
above or after the specified range.</DL>


<H3>4.5.5&nbsp;&nbsp;Example</H3> 
<DL COMPACT=compact><DT><B><TT>C1 2 0 fit -5,-5u 0,0 1,1u 4,2u 5,2u order=1</TT></B><DD> This
 ``capacitor'' stores 5 microcoulombs at -5 volts (negative,
 corresponding to the negative voltage, as expected). The charge
 varies linearly to 0 at 0 volts, acting like a 1 microfarad
 capacitor. (C = dq/dv). This continues to 1 volt. The 0,0 point
 could have been left out. The charge increases only to 2
 microcoulombs at 4 volts, for an incremental capacitance of 1u/3 or
 .3333 microfarads. The same charge at 5 volts indicates that it
 saturates at 2 microcoulombs. For negative voltages, the slope
 continues.</DL>


</BODY>
</HTML>
